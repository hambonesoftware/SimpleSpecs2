# SimpleSpecs environment configuration
# Copy this file to `.env` and adjust values as needed.

# Server runtime options
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=info

# Database connection string (SQLite by default)
DATABASE_URL=sqlite:///./simplespecs.db

# Storage locations
UPLOAD_DIR=upload_objects_path
EXPORT_DIR=exported_reports
EXPORT_RETENTION_DAYS=30

# Upload controls
MAX_UPLOAD_SIZE=26214400
ALLOWED_MIMETYPES=application/pdf

# Primary LLM provider configuration
OPENROUTER_API_KEY=
LLM_PROVIDER=openrouter  # options: 'openrouter', 'ollama'
OPENROUTER_MODEL=openrouter/auto
OPENROUTER_SITE_URL=http://localhost:3600
OPENROUTER_X_TITLE=SimpleSpecs (Dev)

# Parsing feature toggles
PARSER_MULTI_COLUMN=true
PARSER_ENABLE_OCR=true
MINERU_FALLBACK=true

# Header extraction behaviour
HEADERS_SUPPRESS_TOC=true
HEADERS_SUPPRESS_RUNNING=true
HEADERS_MODE=llm_simple
HEADERS_LLM_MODEL=anthropic/claude-3.5-sonnet
HEADERS_LLM_MAX_INPUT_TOKENS=120000
HEADERS_LLM_TIMEOUT_S=120
HEADERS_LLM_CACHE_DIR=.cache/headers
HEADERS_LLM_STRICT=0
HEADERS_LOG_DIR=backend/logs
# Matching knobs (defaults on)
HEADERS_MATCH_PAGE_BAND=2
HEADERS_MATCH_MIN_TITLE_LEN=4
HEADERS_MATCH_ENABLE_OFFSET_CALIBRATION=1
HEADERS_MATCH_OFFSET_SEED_MIN=3
HEADER_LOCATE_USE_EMBEDDINGS=0
HEADER_LOCATE_FUSE_WEIGHTS=0.55,0.30,0.10,0.05
HEADER_LOCATE_MIN_LEXICAL=0.30
HEADER_LOCATE_MIN_COSINE=0.25
HEADER_LOCATE_PREFER_LAST_MATCH=1

# Specification extraction tuning
SPEC_TERMS_DIR=backend/resources/terms
SPEC_RULE_MIN_HITS=1
SPEC_MULTI_LABEL_MARGIN=0.0

# Risk scoring baselines
RISK_BASELINES_PATH=backend/resources/baselines/mandatory_clauses.json

# Embeddings provider configuration
EMBEDDINGS_PROVIDER=local
EMBEDDINGS_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDINGS_CACHE_DIR=.cache/emb
EMBEDDINGS_OPENROUTER_MODEL=openai/text-embedding-3-small
EMBEDDINGS_OPENROUTER_TIMEOUT_S=60
